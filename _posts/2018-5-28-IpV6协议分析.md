---
layout: post
title: IpV6协议分析
description: IpV6协议分析
category: 网络协议分析
---

## IpV6协议
### 概念
IPv6的地址长度是128位，由两部分构成，即格式前缀（Format Prefix，FP）和地址。


**表示方式：冒号十六进制法**

*例：89a:0:0:0:0:0:0:a8b2*

所有类型的IPv6地址都被分配到端口，而不是节点（一个节点上可能存在多个端口）。IPv6中地址有3种类型：单播地址（Unicast）、多播传送（Multicast）和任意播地址（Anycast），也称为单播、多播和泛播地址。

- 单播地址：一个单接口标识符，送往单播地址的数据包将被传送到该地址所标识的接口上。
- 任意播地址：一组接口（一般属于不同节点）的标识符。送往一个任意播地址的数据包将被传送到该地址所标识的接口之一（即根据路由协议中的距离的计算方法而确定的“最近”的一个）。
- 多播地址：一组接口（一般属于不同节点）的标识符。送往一个多播地址的数据包将被传送到该地址标识的所有接口上。

### 地址结构
- 全球单播地址
![](https://i.imgur.com/tHFV8Zu.jpg)
- 全球路由选择前缀，占48位（含001前缀），分配给各公司和组织，用于因特网中路由器的路由选择。
- 子网标识符，占16位，用于各公司和组织创建自己的子网。如果没有子网，可以把该字段设置为全0。
- 接口标识符，占64位，用于标识主机或路由器单个的网络接口，相当于IPv4中的主机号字段。

### 报文格式

![](https://i.imgur.com/SiATXlW.png)


**扩展首部**

IPv6在基本首部后增加了最多6个扩展首部，分别是逐跳选项、源路由选择、分片、鉴别、加密的安全有效载荷和目的站选项，进而扩充了IP数据报的功能。

![](https://i.imgur.com/dfqMXkW.png)

## 数据帧分析
**icmp:**
![](https://i.imgur.com/ZFq70sd.png)
**tcp:**
![](https://i.imgur.com/dGXYTio.png)
